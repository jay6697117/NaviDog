# 2D UI 优化设计

## 背景与目标
当前前端以 Ant Design 为核心，样式多为内联，视觉与交互反馈缺乏统一规范。目标是在不引入新设计系统库的前提下，建立可持续的 2D 视觉基线，提升一致性、信息层次与交互反馈质量，并确保暗色/亮色模式体验稳定。

## 设计范围
- 视觉体系：色板、字体、间距、圆角、阴影、边界
- 信息层次：背景层级、容器层级、文字层级
- 交互反馈：hover/active/展开/切换动效与节奏
- 覆盖关键模块：侧边栏、Tabs、编辑器区域、数据表格、日志面板、Modal

## 非目标
- 不引入完整设计系统库
- 不改变核心交互流程与业务逻辑
- 不做 WebGL/3D 级复杂视觉

## 约束
- 以 Ant Design 5 主题能力为核心
- 动效以轻量 CSS 为主，尊重 `prefers-reduced-motion`
- 保持性能稳定，避免引发布局重排与卡顿

## 方案选择
采用“AntD Token + CSS 变量 + 组件层样式规范”的组合方案：
1. 使用 `ConfigProvider` 统一 token 与主题切换
2. 在全局样式中落地 CSS 变量，供非 AntD 组件使用
3. 在关键组件层统一容器、间距、边界与交互反馈

## 设计细节
### 1) 主题与变量体系
- 在 `ConfigProvider` 内定义统一的 `token`（色板、文字、边界、圆角、阴影、间距）
- 将常用 token 同步映射为 CSS 变量，确保全局一致性
- 通过 `data-theme` 或顶层 `class` 进行暗/亮模式切换

建议变量示例（非代码）：
- 颜色：`--color-bg-base`, `--color-bg-panel`, `--color-border`, `--color-text-primary`
- 视觉：`--radius-sm`, `--radius-md`, `--shadow-1`, `--shadow-2`
- 间距：`--space-4`, `--space-8`, `--space-12`, `--space-16`

### 2) 信息层次与布局规范
- 背景三层：base / panel / elevated
- 内容两级：primary / secondary
- 统一行高与密度：12/13/14 字号与对应行高
- 面板与列表统一边界与分割线对比度

### 3) 交互反馈与动效
- 统一动效节奏：
  - hover 120-160ms
  - active 80-120ms
  - 展开/收起 200-240ms
- 使用 `transform` + `opacity` 优先，避免布局重排
- 为 `prefers-reduced-motion` 提供降级

## 覆盖模块建议
- 侧边栏：树节点 hover/active、密度与文字层级统一
- Tabs：选中态/悬浮态视觉统一，切换动效一致
- 编辑器与表格区域：容器分层、边界与阴影统一
- 日志面板：层级与展开/收起动效
- Modal：标题、正文、底部按钮区间距规范化

## 验证方式
- 视觉一致性回归：主流程截图对比
- 交互体验回归：拖拽、切换、弹窗、暗色模式
- 性能观察：动效区域滚动与交互流畅性

## 风险与缓解
- 风险：内联样式较多导致主题落地零散
  - 缓解：分阶段迁移，优先高频区域
- 风险：动效影响性能或注意力
  - 缓解：使用轻量动效并提供降级

## 里程碑建议
1. 建立 token 与 CSS 变量基线
2. 覆盖侧边栏与 Tabs
3. 覆盖编辑器与表格区域
4. 覆盖日志面板与 Modal
5. 全局回归与细节修整
